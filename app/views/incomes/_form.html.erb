<div class="panel panel-default">
  <div class="panel-body">
    <%= simple_form_for @income do |f| %>
      <div class="form-inputs">
        <%= f.input :description, input_html: { autofocus: true } %>
        <%= f.input :paid_at, as: :string, input_html: { class: :date } %>
        <%= f.input :category %>
        <% unless @income.chargeable_inactive? %>
          <%= f.input :chargeable_type, as: :hidden, input_html: { value: 'Account' } %>
        <% end %>
        <% if @income.paid? || @income.chargeable_inactive? %>
          <%= f.association :chargeable, collection: [@income.chargeable], label: @income.chargeable_type, disabled: true %>
        <% else %>
          <%= f.association :chargeable, collection: Account.active.ordered, label: 'Account' %>
        <% end %>
        <%= f.input :value, disabled: (@income.paid? || @income.chargeable_inactive?) %>
      </div>

      <div class="form-actions">
        <%= f.submit class: 'btn btn-success' %>
        <% if @income.persisted? %>
          <%= link_to 'Back', income_path(@income), class: 'btn btn-default' %>
        <% else %>
          <%= link_to 'Back', incomes_path, class: 'btn btn-default' %>
        <% end %>
      </div>
    <% end %>
  </div>
</div>
